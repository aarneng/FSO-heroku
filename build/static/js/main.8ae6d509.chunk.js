(this["webpackJsonpround-1"]=this["webpackJsonpround-1"]||[]).push([[0],{41:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(18),o=t.n(r),a=t(9),c=t(8),u=t(3),i=t(2),s=t(5),l=t.n(s),d="http://localhost:3001/api/persons",j={getAll:function(){return l.a.get(d)},create:function(e){return l.a.post(d,e)},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)},deleteByID:function(e){return l.a.delete("".concat(d,"/").concat(e))}},b=(t(41),t(0)),h=function(e){return Object(b.jsxs)(b.Fragment,{children:["look for a name:",Object(b.jsx)("input",{value:e.search,onChange:e.handleSearchChange})]})},f=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:e.newPhoneNumber,onChange:e.handlePhoneNumberChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.message;return null!==n&&""!==n&&n?(console.log(n),e.error?Object(b.jsxs)("div",{className:"notification error",children:[n,Object(b.jsx)("br",{})]}):Object(b.jsxs)("div",{className:"notification",children:[n,Object(b.jsx)("br",{})]})):null},O=function(e){return Object(b.jsx)(m,{message:e.message,error:!0})},v=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.search.toLowerCase())}));return Object(b.jsx)(b.Fragment,{children:n.map((function(n,t){return Object(b.jsxs)("div",{children:[n.name,": ",n.number,Object(b.jsx)("button",{onClick:function(t){return e.handleClick(t,n)},children:"kill this person"})]},t)}))})},g=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1];Object(i.useEffect)((function(){j.getAll().then((function(e){r(e.data)}))}),[]);var o=Object(i.useState)(""),s=Object(u.a)(o,2),l=s[0],d=s[1],g=Object(i.useState)(""),p=Object(u.a)(g,2),x=p[0],w=p[1],C=Object(i.useState)(""),N=Object(u.a)(C,2),S=N[0],k=N[1],y=Object(i.useState)(null),D=Object(u.a)(y,2),P=D[0],L=D[1],A=Object(i.useState)(null),B=Object(u.a)(A,2),F=B[0],I=B[1];function E(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;n?(I(e),setTimeout((function(){console.log("timed out",t),I(null)}),t)):(L(e),setTimeout((function(){console.log("timed out",t),L(null)}),t))}return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(h,{search:S,handleSearchChange:function(e){var n=e.target?e.target.value:"";k(n)}}),Object(b.jsx)("h3",{children:"Add new name"}),Object(b.jsx)(f,{handleSubmit:function(e){e.preventDefault();var n=function(e){var n=t[e];if(n.name.toLowerCase()!==l.toLowerCase())return"continue";if(console.log(n),!window.confirm("".concat(l," is already added to phonebook. replace old number with a new one?")))return{v:void 0};var o=Object(a.a)(Object(a.a)({},n),{},{number:x});return j.update(n.id,o).then((function(e){!function(e){var n=t.filter((function(n){return n.id!==e.id}));r([].concat(Object(c.a)(n),[e]))}(o)})).catch((function(e){console.log(e.response.data),E(e.response.data,!0)})),console.log("updated"),{v:void 0}};for(var o in t){var u=n(o);if("continue"!==u&&"object"===typeof u)return u.v}if(""!==l&&""!==x){var i=function(){for(var e=1,n=t.map((function(e){return e.id})),r=e;r<t.length+10;r++)if(!n.includes(r)){e=r;break}return{name:l,number:x,id:e}}();j.create(i).then((function(e){console.log(e.data),r([].concat(Object(c.a)(t),[e.data]))})).catch((function(e){E(e.response.data.error,!0),console.log("error",e)})),d(""),w("")}else alert("name and/or phone number cannot be empty!")},newName:l,handleNameChange:function(e){var n=e.target?e.target.value:"";d(n)},newPhoneNumber:x,handlePhoneNumberChange:function(e){var n=e.target?e.target.value:"";w(n)}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(m,{message:P}),Object(b.jsx)(O,{message:F}),Object(b.jsx)(v,{persons:t,handleClick:function(e,n){e.preventDefault();var o=n.id;console.log(o),window.confirm("Do you really want to delete this poor soul of a person")&&(E("removed "+n.name),j.deleteByID(o).catch((function(e){return I("oh no! an error occured! :( the error says: "+e.name+": "+e.message)})),r(t.filter((function(e){return e.id!==o}))))},search:S})]})};o.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.8ae6d509.chunk.js.map